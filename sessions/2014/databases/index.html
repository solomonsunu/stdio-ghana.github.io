<!doctype html> <html> <head> <title>STDIO Ghana - Databases</title> <link href='/assets/presentation-1b136e1d318d079016ec7de3e6038131.css' rel='stylesheet' type='text/css'/> <script type="text/javascript" src="http://stdio-ghana.github.io/js/head.min.js"></script> <script type="text/javascript" src="http://stdio-ghana.github.io/js/reveal.min.js"></script> </head> <body> <div class="reveal"><div class="slides"> <section> <h2>Databases</h2> Jonathon </section> <section> <h3 id="database">Database:</h3> <p>An organized collection of related data. </p> <p>A database could be a collection of alphabetized paper files.</p> </section> <section> <p>An electronic database uses software to store data in an organized way. </p> <p>The software allows the user to update, view and search data.</p> </section> <section> <p style="text-align:center">Why not just store the database your program needs in a text file?</p> </section> <section> <p>Problems with text files</p> <ul> <li>Speed when database (file) becomes large.</li> <li>Only one user can update file at a time.</li> <li>Only simple data structures can be (easily) implemented.</li> <li>Hard to share data.</li> <li>Every access function must be written by hand.</li> </ul> </section> <section> <p>Database software solves all these problems and solves problems that do not arise until the database becomes large.</p> </section> <section> <p>There are many different kinds of software systems that call themselves databases. For the purpose of this lecture, I will limit the material to <em>relational</em> databases.</p> </section> <section> <p style="text-align:center">Relational Databases use Tables to Store Data</p> <table> <thead> <tr> <th style="text-align: left">Course Name</th> <th style="text-align: center">Number</th> <th style="text-align: right">Dept</th> <th style="text-align: right">Credits</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">Intro to Python</td> <td style="text-align: center">CAP101</td> <td style="text-align: right">CS</td> <td style="text-align: right">3</td> </tr> <tr> <td style="text-align: left">Stat Methods I</td> <td style="text-align: center">STA511</td> <td style="text-align: right">MA</td> <td style="text-align: right">3</td> </tr> <tr> <td style="text-align: left">Intro to Algorithms</td> <td style="text-align: center">COT401</td> <td style="text-align: right">CS</td> <td style="text-align: right">3</td> </tr> </tbody> </table> <p><br/> A conceptual relational database table is shown above. </p> <p>Each row in a database represents a unique record in the table. Each column in a row is called a field. Each field can hold different types of data.</p> <p>The rows of a database table are different from each other. Rows are uniquely identified by a value called a <em>primary key</em>. In this example, the Course Number is the primary key.</p> </section> <section> <p>A relational database typically consists of multiple tables. The tables are related by identical column values. The primary key of one table can be listed in the column of another table. When this occurs, this value is called a <em>foreign key</em>. Use of a foreign key allows the linking of tables together.</p> </section> <section> <table> <thead> <tr> <th style="text-align: left">Course Name</th> <th style="text-align: center">Number</th> <th style="text-align: right">Dept</th> <th style="text-align: right">Credits</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">Intro to Python</td> <td style="text-align: center">CAP101</td> <td style="text-align: right">CS</td> <td style="text-align: right">3</td> </tr> <tr> <td style="text-align: left">Stat Methods I</td> <td style="text-align: center">STA511</td> <td style="text-align: right">MA</td> <td style="text-align: right">3</td> </tr> <tr> <td style="text-align: left">Intro to Algorithms</td> <td style="text-align: center">COT401</td> <td style="text-align: right">CS</td> <td style="text-align: right">3</td> </tr> </tbody> </table> <p><br/></p> <table> <thead> <tr> <th style="text-align: left">StudentID</th> <th style="text-align: center">Term</th> <th style="text-align: right">Number</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">S0011</td> <td style="text-align: center">F13</td> <td style="text-align: right">CAP101</td> </tr> <tr> <td style="text-align: left">S0012</td> <td style="text-align: center">F13</td> <td style="text-align: right">STA511</td> </tr> <tr> <td style="text-align: left">S0099</td> <td style="text-align: center">F13</td> <td style="text-align: right">COT401</td> </tr> </tbody> </table> <p><br/></p> <p>In this case the Course Number is a foreign key in the student schedule table.</p> </section> <section> <p>In the previous example, the keys are human-readable strings. In modern Relational DataBase Management Systems (RDBMS), keys are auto-generated. </p> <p>Would you want to create by hand a set of unique identifiers for a million row table?</p> </section> <section> <p>Relational databases are built to not have redundant data. For a university database, the student personal information would be stored in one table. The primary key of that table would link any and all data in that table to related tables such as Course Schedule or Final Grades. The student's name, for example, would not be repeated in these tables.</p> <p>Why would you NOT want to repeat the same data in multiple tables?</p> <p>The degree to which databases succeed in preventing redundancy is captured in a set of definition called "Normal Forms". Further discussion is outside the scope of the course.</p> </section> <section> <p>For some applications, the database will intentionally have tables with redundant data. This is called de-normalized data. </p> <p>Why might an organization want to do this?</p> </section> <section> <p style="text-align:center">Using a database</p> <p>The software developer will interact with the database via a management tool, a library or for precise work, Structured Query Language (SQL). </p> <p>In a language like Python, you write the step by step procedure of what you want the program to do. These languages are called <em>procedual languages</em>. SQL is different. Typically, you write code or a statement that describes the <strong>result</strong> you wish to achieve. Such languages are called <em>declarative</em> languages.</p> </section> <section> <p style="text-align:center">Some SQL</p> <div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="n">student_name</span><span class="p">,</span> <span class="n">phone_number</span> <span class="k">FROM</span> <span class="n">student_info</span>

<span class="k">UPDATE</span> <span class="n">student_info</span>
  <span class="k">SET</span> <span class="n">phone_number</span> <span class="o">=</span> <span class="s1">&#39;03292524583&#39;</span>
  <span class="k">WHERE</span> <span class="n">student_id</span> <span class="o">=</span> <span class="s1">&#39;S00019&#39;</span>

<span class="k">SELECT</span> <span class="n">student</span><span class="p">.</span><span class="n">student_name</span><span class="p">,</span> <span class="n">schedule</span><span class="p">.</span><span class="n">course_number</span>
  <span class="k">FROM</span> <span class="n">student_info</span>
  <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">schedule</span>
  <span class="k">ON</span> <span class="n">student</span><span class="p">.</span><span class="n">student_id</span> <span class="o">=</span> <span class="n">schedule</span><span class="p">.</span><span class="n">student_id</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">student</span><span class="p">.</span><span class="n">student_name</span></code></pre></div> <p><br/> SQL is a rich language and has been in use for over 40 years. Learning SQL is a separate course from Python.</p> </section> <section> <p style="text-align:center">Advantages of using an RDBMS</p> <ul> <li>Scalability</li> <li>Distributed (multiple users can access over network)</li> <li>Reduced redundancy of data</li> <li>Backup and recovery</li> <li>Transactions (logging of who made what changes when)</li> <li>Fine-grained security</li> <li>Can represent complex structures</li> <li>Complex queries/reports possible.</li> </ul> </section> <section> <p style="text-align:center">Python and DB</p> <p>The Python Database API (DB-API) defines a standard interface for Python database access modules. Itâ€™s documented in <a href="http://legacy.python.org/dev/peps/pep-0249/">PEP 249</a>. Most modern databases support PEP 249.</p> </section> <section> <p style="text-align:center">Example using MySQL</p> <div class="highlight"><pre><code class="python"><span class="c">#!/usr/bin/python</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">MySQLdb</span> <span class="kn">as</span> <span class="nn">mdb</span>

<span class="n">con</span> <span class="o">=</span> <span class="n">mdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="s">&#39;testuser&#39;</span><span class="p">,</span> <span class="s">&#39;test623&#39;</span><span class="p">,</span> <span class="s">&#39;testdb&#39;</span><span class="p">);</span>

<span class="k">with</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;SELECT * FROM Writers&quot;</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">row</span>

<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></pre></div> </section> <section> <p style="text-align:center">Questions?????</p> </section> </div></div> <script>Reveal.initialize({controls:true,progress:true,history:true,center:true,theme:Reveal.getQueryHash().theme,transition:Reveal.getQueryHash().transition||"default",dependencies:[{src:"http://stdio-ghana.github.io/js/classList.js",condition:function(){return !document.body.classList}},{src:"http://stdio-ghana.github.io/js/notes.js",async:true,condition:function(){return !!document.body.classList}}]});</script> </body> </html>